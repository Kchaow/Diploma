{"version":3,"mappings":"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","names":["items","className","visible","setVisible","useState","show","hide","jsx","index","item","isValidElement","dropdownItem","disabled","DropdownPortal","createPortal","height","StagesCustomization","setMainViewVisibility","setStageViewPosition","isMobile","useLayoutPreferences","e","jsxs","Fragment","ViewIcon","mainViewVisibility","stageViewPosition","MainViewVisibility","StageViewPosition","handlePositionChange","Filter","resetStatuses","useFilter","Result","Tooltip","Tippy","DefaultDropdownProps","allVisible","classNames","visibleStatuses","DataTreeView","stages","setSearch","useCallback","event","nodeId","TreeNode","stage","selected","memo","hasChildren","isExpanded","hasSelectedDescendant","child","useEffect","setIsExpanded","search","filterStageTree","isSelected","onSelect","StatusIcon","Total","handleToggleClick","filteredChildren","LOG_FETCH_SIZE","POLL_INTERVAL","useStepsPoller","props","loading","openStage","expandedSteps","steps","setSteps","stepBuffers","setUserManuallySetNode","updateStepConsoleOffset","stepId","stepBuffer","response","getConsoleTextOffset","newLogLines","startByte","prev","parseUrlParams","params","expanded","step","setExpandedSteps","getDefaultSelectedStep","userManuallySetNode","selectedStep","stepResult","selectedStepResult","defaultStep","setOpenStage","run","startPollingPipeline","data","stepsRef","error","handleStageSelect","stepsForStage","lastStep","newlyExpandedSteps","id","stageId","getStageStepBuffers","buffers","findStage","result","getStageSteps","onStepToggle","onData","polling","checkComplete","interval","ScrollToTopBottom","isScrollable","setIsScrollable","updateScrollState","scrollTop","windowHeight","docHeight","atTop","distanceFromBottom","observer","scrollToBottom","setTreeViewWidth","setStageViewWidth","treeViewWidth","stageViewWidth","stageViewHeight","direction","storageKey","setIsDragging","isVertical","initialSize","setPanelSize","panelSize","dividerRef","useRef","startDragging","stopDragging","handleDragging","newSize","getContainerOffset","clampedSize","setStageViewHeight","handleDoubleClick","resetSize","containerRef","rect","Children","childrenArray","gridTemplate","StageNodeLink","agent","getAgentUrl","name","href","DOCUMENT","CONSOLE","StageDetails","resultToColor","exact","Started","lazy","__vitePreload","ConsoleLogCard","showMoreLogs","prettySizeString","size"],"ignoreList":[],"sources":["../../../../frontend/common/components/dropdown.tsx","../../../../frontend/common/components/dropdown-portal.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/components/skeleton.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/components/stages-customization.tsx","../../../../frontend/common/components/filter.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/DataTreeView.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/PipelineConsoleModel.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/hooks/use-steps-poller.ts","../../../../frontend/pipeline-console-view/pipeline-console/main/scroll-to-top-bottom.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/split-view.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/StageNodeLink.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/symbols.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/stage-details.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/ConsoleLogCard.tsx"],"sourcesContent":["import Tippy, { TippyProps } from \"@tippyjs/react\";\nimport { isValidElement, ReactElement, ReactNode, useState } from \"react\";\n\nimport Tooltip from \"./tooltip.tsx\";\n\n/**\n * A customized (and customizable) implementation of Tippy dropdowns\n */\nexport default function Dropdown({\n  items,\n  disabled,\n  className,\n}: DropdownProps) {\n  const [visible, setVisible] = useState(false);\n  const show = () => setVisible(true);\n  const hide = () => setVisible(false);\n\n  return (\n    <Tooltip content={\"More actions\"}>\n      <Tippy\n        visible={visible}\n        onClickOutside={hide}\n        {...DefaultDropdownProps}\n        content={\n          <div className=\"jenkins-dropdown\">\n            {items.map((item, index) => {\n              if (item === \"separator\") {\n                return (\n                  <div\n                    key={`separator-${index}`}\n                    className=\"jenkins-dropdown__separator\"\n                  />\n                );\n              }\n\n              if (isValidElement(item)) {\n                return (\n                  <div key={index} className=\"jenkins-dropdown__custom-item\">\n                    {item}\n                  </div>\n                );\n              }\n\n              const dropdownItem = item as DropdownItem;\n              return (\n                <a\n                  key={index}\n                  className=\"jenkins-dropdown__item\"\n                  href={dropdownItem.href}\n                  target={dropdownItem.target}\n                  download={dropdownItem.download}\n                >\n                  <div className=\"jenkins-dropdown__item__icon\">\n                    {dropdownItem.icon}\n                  </div>\n                  {dropdownItem.text}\n                </a>\n              );\n            })}\n          </div>\n        }\n      >\n        <button\n          className={\"jenkins-button \" + className}\n          type=\"button\"\n          disabled={disabled}\n          onClick={visible ? hide : show}\n        >\n          <div className=\"jenkins-overflow-button__ellipsis\">\n            <span />\n            <span />\n            <span />\n          </div>\n        </button>\n      </Tippy>\n    </Tooltip>\n  );\n}\n\nexport const DefaultDropdownProps: TippyProps = {\n  theme: \"dropdown\",\n  duration: 250,\n  touch: true,\n  animation: \"dropdown\",\n  interactive: true,\n  offset: [0, 0],\n  placement: \"bottom-start\",\n  arrow: false,\n};\n\ninterface DropdownProps {\n  items: (DropdownItem | ReactElement | \"separator\")[];\n  disabled?: boolean;\n  className?: string;\n}\n\ninterface DropdownItem {\n  text: string;\n  href?: string;\n  icon: ReactNode;\n  target?: string;\n  download?: string;\n}\n","import { ReactNode } from \"react\";\nimport { createPortal } from \"react-dom\";\n\ninterface DropdownPortalProps {\n  children: ReactNode;\n}\n\nexport default function DropdownPortal({ children }: DropdownPortalProps) {\n  const container = document.getElementById(\"console-pipeline-overflow-root\");\n\n  if (!container) {\n    console.error(\"DropdownPortal: Target container not found!\");\n    return null;\n  }\n\n  return createPortal(children, container);\n}\n","import \"./skeleton.scss\";\n\nexport default function Skeleton({ height }: { height?: number }) {\n  return (\n    <div\n      className={\"pgv-skeleton\"}\n      style={\n        height\n          ? {\n              height: `${height}rem`,\n            }\n          : {}\n      }\n    />\n  );\n}\n","import \"./stages-customization.scss\";\n\nimport { ChangeEvent } from \"react\";\n\nimport {\n  MainViewVisibility,\n  StageViewPosition,\n  useLayoutPreferences,\n} from \"../providers/user-preference-provider.tsx\";\n\nexport default function StagesCustomization() {\n  const {\n    mainViewVisibility,\n    setMainViewVisibility,\n    stageViewPosition,\n    setStageViewPosition,\n    isMobile,\n  } = useLayoutPreferences();\n\n  if (isMobile) {\n    return null;\n  }\n\n  const handleViewChange = (e: ChangeEvent<HTMLSelectElement>) => {\n    setMainViewVisibility(e.target.value as MainViewVisibility);\n  };\n\n  const handlePositionChange = (e: ChangeEvent<HTMLSelectElement>) => {\n    setStageViewPosition(e.target.value as StageViewPosition);\n  };\n\n  return (\n    <>\n      <label\n        className=\"jenkins-dropdown__item pgv-stages-customization\"\n        htmlFor=\"main-view-visibility\"\n      >\n        <div className=\"jenkins-dropdown__item__icon\">\n          <ViewIcon\n            mainViewVisibility={mainViewVisibility}\n            stageViewPosition={stageViewPosition}\n          />\n        </div>\n        Views\n        <span>\n          {mainViewVisibility === MainViewVisibility.BOTH && \"Graph and stages\"}\n          {mainViewVisibility === MainViewVisibility.GRAPH_ONLY && \"Graph\"}\n          {mainViewVisibility === MainViewVisibility.STAGES_ONLY && \"Stages\"}\n        </span>\n        <select\n          id=\"main-view-visibility\"\n          value={mainViewVisibility}\n          onChange={handleViewChange}\n        >\n          <option value={MainViewVisibility.BOTH}>Graph and stages</option>\n          <option value={MainViewVisibility.GRAPH_ONLY}>Graph</option>\n          <option value={MainViewVisibility.STAGES_ONLY}>Stages</option>\n        </select>\n      </label>\n\n      <label\n        className=\"jenkins-dropdown__item pgv-stages-customization\"\n        htmlFor=\"stage-view-position\"\n      >\n        <div className=\"jenkins-dropdown__item__icon\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n            <circle\n              cx=\"128\"\n              cy=\"96\"\n              r=\"48\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"32\"\n            />\n            <circle\n              cx=\"256\"\n              cy=\"416\"\n              r=\"48\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"32\"\n            />\n            <path\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"32\"\n              d=\"M256 256v112\"\n            />\n            <circle\n              cx=\"384\"\n              cy=\"96\"\n              r=\"48\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"32\"\n            />\n            <path\n              d=\"M128 144c0 74.67 68.92 112 128 112M384 144c0 74.67-68.92 112-128 112\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"32\"\n            />\n          </svg>\n        </div>\n        Graph position\n        <span>\n          {stageViewPosition === StageViewPosition.TOP ? \"Top\" : \"Left\"}\n        </span>\n        <select\n          id=\"stage-view-position\"\n          value={stageViewPosition}\n          onChange={handlePositionChange}\n          disabled={mainViewVisibility === MainViewVisibility.STAGES_ONLY}\n        >\n          <option value={StageViewPosition.TOP}>Top</option>\n          <option value={StageViewPosition.LEFT}>Left</option>\n        </select>\n      </label>\n      <div className=\"jenkins-dropdown__separator\" />\n    </>\n  );\n}\n\nfunction ViewIcon({\n  mainViewVisibility,\n  stageViewPosition,\n}: {\n  mainViewVisibility: MainViewVisibility;\n  stageViewPosition: StageViewPosition;\n}) {\n  if (mainViewVisibility === \"both\" && stageViewPosition === \"top\") {\n    return (\n      <svg\n        width=\"512px\"\n        height=\"512px\"\n        viewBox=\"0 0 512 512\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <g\n          fill=\"none\"\n          fillRule=\"evenodd\"\n          stroke=\"currentColor\"\n          strokeWidth=\"32\"\n        >\n          <rect x=\"31\" y=\"86\" width=\"450\" height=\"340\" rx=\"70\" />\n          <line x1=\"31\" y1=\"180\" x2=\"470\" y2=\"180\" />\n          <line x1=\"184\" y1=\"180\" x2=\"184\" y2=\"420\" />\n        </g>\n      </svg>\n    );\n  }\n\n  if (mainViewVisibility === \"both\" && stageViewPosition === \"left\") {\n    return (\n      <svg\n        width=\"512px\"\n        height=\"512px\"\n        viewBox=\"0 0 512 512\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <g\n          fill=\"none\"\n          fillRule=\"evenodd\"\n          stroke=\"currentColor\"\n          strokeWidth=\"32\"\n        >\n          <rect x=\"31\" y=\"86\" width=\"450\" height=\"340\" rx=\"70\" />\n          <line x1=\"150\" y1=\"100\" x2=\"150\" y2=\"420\" />\n          <line x1=\"280\" y1=\"100\" x2=\"280\" y2=\"420\" />\n        </g>\n      </svg>\n    );\n  }\n\n  if (mainViewVisibility === \"graphOnly\" && stageViewPosition === \"top\") {\n    return (\n      <svg\n        width=\"512px\"\n        height=\"512px\"\n        viewBox=\"0 0 512 512\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <g\n          fill=\"none\"\n          fillRule=\"evenodd\"\n          stroke=\"currentColor\"\n          strokeWidth=\"32\"\n        >\n          <rect x=\"31\" y=\"86\" width=\"450\" height=\"340\" rx=\"70\" />\n          <line x1=\"31\" y1=\"180\" x2=\"470\" y2=\"180\" />\n        </g>\n      </svg>\n    );\n  }\n\n  if (\n    mainViewVisibility === \"stagesOnly\" ||\n    (mainViewVisibility === \"graphOnly\" && stageViewPosition === \"left\")\n  ) {\n    return (\n      <svg\n        width=\"512px\"\n        height=\"512px\"\n        viewBox=\"0 0 512 512\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <g\n          fill=\"none\"\n          fillRule=\"evenodd\"\n          stroke=\"currentColor\"\n          strokeWidth=\"32\"\n        >\n          <rect x=\"31\" y=\"86\" width=\"450\" height=\"340\" rx=\"70\" />\n          <line x1=\"184\" y1=\"100\" x2=\"184\" y2=\"420\" />\n        </g>\n      </svg>\n    );\n  }\n}\n","import \"./filter.scss\";\n\nimport Tippy from \"@tippyjs/react\";\nimport { useState } from \"react\";\n\nimport { useFilter } from \"../../pipeline-console-view/pipeline-console/main/providers/filter-provider.tsx\";\nimport { Result } from \"../../pipeline-graph-view/pipeline-graph/main/PipelineGraphModel.tsx\";\nimport { classNames } from \"../utils/classnames.ts\";\nimport { DefaultDropdownProps } from \"./dropdown.tsx\";\nimport StatusIcon from \"./status-icon.tsx\";\nimport Tooltip from \"./tooltip.tsx\";\n\nexport default function Filter({ disabled }: FilterProps) {\n  const [visible, setVisible] = useState(false);\n  const { visibleStatuses, toggleStatus, resetStatuses, allVisible } =\n    useFilter();\n\n  const statuses = [\n    {\n      key: \"running\",\n      text: \"Running\",\n      status: Result.running,\n    },\n    {\n      key: \"success\",\n      text: \"Successful\",\n      status: Result.success,\n    },\n    {\n      key: \"failure\",\n      text: \"Failed\",\n      status: Result.failure,\n    },\n    {\n      key: \"unstable\",\n      text: \"Unstable\",\n      status: Result.unstable,\n    },\n    {\n      key: \"aborted\",\n      text: \"Aborted\",\n      status: Result.aborted,\n    },\n    {\n      key: \"skipped\",\n      text: \"Skipped\",\n      status: Result.skipped,\n    },\n    {\n      key: \"not_built\",\n      text: \"Not built\",\n      status: Result.not_built,\n    },\n  ];\n\n  const show = () => setVisible(true);\n  const hide = () => setVisible(false);\n\n  return (\n    <Tooltip content={\"Filter\"}>\n      <Tippy\n        {...DefaultDropdownProps}\n        visible={visible}\n        onClickOutside={hide}\n        placement=\"bottom\"\n        appendTo={document.body}\n        offset={[0, -1]}\n        content={\n          <div className=\"jenkins-dropdown\" data-testid=\"filter-dropdown\">\n            <div className=\"jenkins-dropdown__heading\">\n              Filter\n              {!allVisible && (\n                <button\n                  className={\n                    \"jenkins-button jenkins-button--tertiary jenkins-!-accent-color pgv-reset-button\"\n                  }\n                  onClick={resetStatuses}\n                >\n                  Reset\n                </button>\n              )}\n            </div>\n            {statuses.map((item, index) => (\n              <button\n                key={index}\n                className={classNames(\n                  \"jenkins-dropdown__item\",\n                  \"pgv-filter-button\",\n                  {\n                    \"pgv-filter-button--unchecked\": !visibleStatuses.includes(\n                      item.status,\n                    ),\n                  },\n                )}\n                onClick={() => toggleStatus(item.status)}\n              >\n                <div className=\"jenkins-dropdown__item__icon\">\n                  <StatusIcon\n                    status={item.status}\n                    skeleton={!visibleStatuses.includes(item.status)}\n                    percentage={0}\n                  />\n                </div>\n                {item.text}\n              </button>\n            ))}\n          </div>\n        }\n      >\n        <button\n          className={classNames(\n            \"jenkins-button\",\n            {\n              \"jenkins-button--tertiary\": allVisible,\n            },\n            {\n              \"jenkins-!-accent-color\": !allVisible,\n            },\n          )}\n          type=\"button\"\n          disabled={disabled}\n          onClick={visible ? hide : show}\n          aria-label={\"Filter\"}\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n            <path\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={!allVisible ? 42 : 36}\n              d=\"M32 144h448M112 256h288M208 368h96\"\n            />\n          </svg>\n        </button>\n      </Tippy>\n    </Tooltip>\n  );\n}\n\ninterface FilterProps {\n  disabled?: boolean;\n}\n","import \"./data-tree-view.scss\";\n\nimport {\n  memo,\n  MouseEvent as ReactMouseEvent,\n  useCallback,\n  useEffect,\n  useState,\n} from \"react\";\n\nimport Filter from \"../../../common/components/filter.tsx\";\nimport StatusIcon from \"../../../common/components/status-icon.tsx\";\nimport { classNames } from \"../../../common/utils/classnames.ts\";\nimport { Total } from \"../../../common/utils/timings.tsx\";\nimport {\n  Result,\n  StageInfo,\n} from \"../../../pipeline-graph-view/pipeline-graph/main/PipelineGraphModel.tsx\";\nimport { useFilter } from \"./providers/filter-provider.tsx\";\n\nexport default function DataTreeView({\n  stages,\n  selected,\n  onNodeSelect,\n}: DataTreeViewProps) {\n  const { search, setSearch, visibleStatuses } = useFilter();\n  const filteredStages = filterStageTree(search, visibleStatuses, stages);\n\n  const handleSelect = useCallback(\n    (event: ReactMouseEvent, nodeId: string) => {\n      onNodeSelect(event, nodeId);\n    },\n    [onNodeSelect],\n  );\n\n  return (\n    <div>\n      <div className={\"pgw-filter-bar\"}>\n        <div className=\"jenkins-search\">\n          <div className=\"jenkins-search__icon\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n              <path\n                d=\"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeMiterlimit=\"10\"\n                strokeWidth=\"32\"\n              />\n              <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeMiterlimit=\"10\"\n                strokeWidth=\"32\"\n                d=\"M338.29 338.29L448 448\"\n              />\n            </svg>\n          </div>\n          <input\n            className=\"jenkins-input jenkins-search__input\"\n            placeholder=\"Search\"\n            type=\"search\"\n            autoComplete=\"off\"\n            autoCorrect=\"off\"\n            autoCapitalize=\"off\"\n            spellCheck=\"false\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n          />\n        </div>\n        <Filter />\n      </div>\n\n      {filteredStages.length === 0 && (\n        <div className={\"jenkins-notice\"}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n            <path\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={36}\n              d=\"M32 144h448M112 256h288M208 368h96\"\n            />\n          </svg>\n          <div>No stages</div>\n        </div>\n      )}\n\n      <ol className={\"pgv-tree\"} role=\"tree\" aria-label={\"Pipeline Stages\"}>\n        {filteredStages.map((stage) => (\n          <TreeNode\n            key={stage.id}\n            stage={stage}\n            selected={String(selected)}\n            onSelect={handleSelect}\n          />\n        ))}\n      </ol>\n    </div>\n  );\n}\n\nconst TreeNode = memo(function TreeNode({\n  stage,\n  selected,\n  onSelect,\n}: TreeNodeProps) {\n  const { search, visibleStatuses, allVisible } = useFilter();\n  const hasChildren = stage.children && stage.children.length > 0;\n  const isSelected = String(stage.id) === selected;\n  const [isExpanded, setIsExpanded] = useState<boolean>(\n    hasSelectedDescendant(stage),\n  );\n\n  function hasSelectedDescendant(stage: StageInfo): boolean {\n    return stage.children?.some(\n      (child) => String(child.id) === selected || hasSelectedDescendant(child),\n    );\n  }\n\n  const handleToggleClick = (e: ReactMouseEvent) => {\n    e.stopPropagation();\n    setIsExpanded(!isExpanded);\n  };\n\n  useEffect(() => {\n    if (hasSelectedDescendant(stage)) {\n      setIsExpanded(true);\n    }\n  }, [selected]);\n\n  useEffect(() => {\n    if (search.length || !allVisible) {\n      if (filterStageTree(search, visibleStatuses, [stage]).length !== 0) {\n        setIsExpanded(true);\n      }\n    }\n  }, [search, visibleStatuses, allVisible]);\n\n  return (\n    <li\n      className=\"pgv-tree-stage\"\n      role={\"treeitem\"}\n      {...(hasChildren ? { \"aria-expanded\": isExpanded } : {})}\n      aria-selected={isSelected}\n      aria-labelledby={`stage-${stage.id}-name`}\n    >\n      <div className=\"pgv-tree-item-container\">\n        <a\n          href={`?selected-node=` + stage.id}\n          onClick={(e) => {\n            // Only prevent left clicks\n            if (e.button !== 0 || e.metaKey || e.ctrlKey) {\n              return;\n            }\n\n            e.preventDefault();\n\n            history.replaceState({}, \"\", `?selected-node=` + stage.id);\n            if (!isSelected) {\n              onSelect(e, String(stage.id));\n            }\n            setIsExpanded(!isExpanded);\n          }}\n          className={classNames(\"pgv-tree-item\", {\n            \"pgv-tree-item--active\": isSelected,\n            \"pgv-tree-item--skeleton\": stage.skeleton,\n          })}\n          aria-labelledby={`stage-${stage.id}-name`}\n        >\n          <div className={\"pgv-tree-item__content\"}>\n            <div className=\"pgv-status-icon\">\n              <StatusIcon\n                status={stage.state}\n                percentage={stage.completePercent}\n                skeleton={stage.skeleton}\n              />\n            </div>\n            <div className={\"pgv-tree-item__info\"}>\n              <div\n                className=\"pgv-tree-item__name\"\n                id={`stage-${stage.id}-name`}\n              >\n                <span className={\"jenkins-visually-hidden\"}>Stage </span>\n                {stage.name}\n              </div>\n              <div className=\"pgv-tree-item__description\">\n                <Total ms={stage.totalDurationMillis} />\n              </div>\n            </div>\n          </div>\n        </a>\n        {hasChildren && (\n          <button\n            className={classNames(\"pgv-tree-item__toggle\", {\n              \"pgv-tree-item__toggle--active\": isExpanded,\n            })}\n            onClick={handleToggleClick}\n            aria-label={`${isExpanded ? \"Collapse\" : \"Expand\"} ${stage.name}`}\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n              <path\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"48\"\n                d=\"M184 112l144 144-144 144\"\n              />\n            </svg>\n          </button>\n        )}\n      </div>\n\n      {hasChildren && isExpanded && (\n        <div className=\"pgv-tree-children\">\n          <ol\n            role={\"group\"}\n            aria-label={`Stages in ${stage.name}`}\n            className={\"pgv-tree\"}\n          >\n            {stage.children.map((child) => (\n              <TreeNode\n                key={child.id}\n                stage={child}\n                selected={selected}\n                onSelect={onSelect}\n              />\n            ))}\n          </ol>\n        </div>\n      )}\n    </li>\n  );\n});\n\nconst filterStageTree = (\n  search: string,\n  visibleStatuses: Result[],\n  stages: StageInfo[],\n): StageInfo[] => {\n  return stages\n    .map((stage) => {\n      const filteredChildren = stage.children\n        ? filterStageTree(search, visibleStatuses, stage.children)\n        : [];\n\n      const matchesSelf =\n        stage.name.toLowerCase().includes(search.toLowerCase()) &&\n        visibleStatuses.includes(stage.state);\n\n      // Include this stage if it matches or has matching children\n      if (matchesSelf || filteredChildren.length > 0) {\n        return {\n          ...stage,\n          children: filteredChildren,\n        };\n      }\n\n      return null;\n    })\n    .filter((stage) => stage !== null);\n};\n\ninterface DataTreeViewProps {\n  stages: StageInfo[];\n  selected?: number;\n  onNodeSelect: (event: ReactMouseEvent, nodeId: string) => void;\n}\n\ninterface TreeNodeProps {\n  stage: StageInfo;\n  selected: string;\n  onSelect: (event: ReactMouseEvent, id: string) => void;\n}\n","// re-export Result so the relative path exists in one location.\nexport * from \"../../../common/RestClient.tsx\";\nexport type {\n  StageInfo,\n  StageType,\n} from \"../../../pipeline-graph-view/pipeline-graph/main/PipelineGraphModel.tsx\";\nexport { Result } from \"../../../pipeline-graph-view/pipeline-graph/main/PipelineGraphModel.tsx\";\n\nexport const LOG_FETCH_SIZE = 150 * 1024;\nexport const POLL_INTERVAL = 1000;\n","import { useCallback, useEffect, useRef, useState } from \"react\";\n\nimport useRunPoller from \"../../../../common/tree-api.ts\";\nimport {\n  getConsoleTextOffset,\n  getRunSteps,\n  LOG_FETCH_SIZE,\n  POLL_INTERVAL,\n  Result,\n  StageInfo,\n  StepInfo,\n  StepLogBufferInfo,\n} from \"../PipelineConsoleModel.tsx\";\n\nexport function useStepsPoller(props: RunPollerProps) {\n  const { run, loading } = useRunPoller({\n    currentRunPath: props.currentRunPath,\n    previousRunPath: props.previousRunPath,\n  });\n\n  const [openStage, setOpenStage] = useState(\"\");\n  const [expandedSteps, setExpandedSteps] = useState<string[]>([]);\n  const [steps, setSteps] = useState<StepInfo[]>([]);\n  const [stepBuffers, setStepBuffers] = useState(\n    new Map<string, StepLogBufferInfo>(),\n  );\n  const [userManuallySetNode, setUserManuallySetNode] = useState(false);\n\n  const stepsRef = useRef<StepInfo[]>([]);\n\n  const updateStepConsoleOffset = useCallback(\n    async (stepId: string, forceUpdate: boolean, startByte: number) => {\n      const stepBuffer = stepBuffers.get(stepId) ?? {\n        lines: [],\n        startByte: 0 - LOG_FETCH_SIZE,\n        endByte: -1,\n        stepId,\n      };\n      if (stepBuffer.startByte > 0 && !forceUpdate) return;\n      const response = await getConsoleTextOffset(stepId, startByte);\n      if (!response) return;\n\n      const newLogLines = response.text.trim().split(\"\\n\") || [];\n\n      if (stepBuffer.endByte > 0 && stepBuffer.endByte <= startByte) {\n        stepBuffer.lines = [...stepBuffer.lines, ...newLogLines];\n      } else {\n        stepBuffer.lines = newLogLines;\n        stepBuffer.startByte = response.startByte;\n      }\n\n      stepBuffer.endByte = response.endByte;\n\n      setStepBuffers((prev) => new Map(prev).set(stepId, stepBuffer));\n    },\n    [],\n  );\n\n  const parseUrlParams = useCallback(\n    (steps: StepInfo[]): boolean => {\n      const params = new URLSearchParams(document.location.search.substring(1));\n      let selected = params.get(\"selected-node\");\n      if (!selected) {\n        return false;\n      }\n\n      setUserManuallySetNode(true);\n\n      const step = steps.find((s) => s.id === selected);\n      const expanded: string[] = [];\n\n      if (step) {\n        selected = step.stageId;\n        expanded.push(step.id);\n\n        updateStepConsoleOffset(\n          step.id,\n          false,\n          parseInt(params.get(\"start-byte\") || `${0 - LOG_FETCH_SIZE}`),\n        );\n      }\n\n      setOpenStage(selected);\n      setExpandedSteps(expanded);\n      return true;\n    },\n    [updateStepConsoleOffset],\n  );\n\n  const getDefaultSelectedStep = (steps: StepInfo[]) => {\n    if (userManuallySetNode) {\n      return;\n    }\n\n    let selectedStep = steps.find((step) => step !== undefined);\n    if (!steps || steps.length === 0 || !selectedStep) {\n      return null;\n    }\n    for (const step of steps) {\n      const stepResult = step.state.toLowerCase() as Result;\n      const selectedStepResult = selectedStep?.state.toLowerCase() as Result;\n      switch (stepResult) {\n        case Result.running:\n        case Result.queued:\n        case Result.paused:\n          // Return first running/queued/paused step.\n          return step;\n        case Result.unstable:\n        case Result.failure:\n        case Result.aborted:\n          if (selectedStepResult && stepResult < selectedStepResult) {\n            // Return first unstable/failed/aborted step which has a state worse than the selectedStep.\n            // E.g. if the first step state is failure we want to return that over a later unstable step.\n            return step;\n          }\n          continue;\n        default:\n          // Otherwise select the step with the worst result with the largest id - e.g. (last step if all successful).\n          if (selectedStepResult && stepResult <= selectedStepResult) {\n            selectedStep = step;\n          }\n      }\n    }\n    return selectedStep;\n  };\n\n  useEffect(() => {\n    getRunSteps()\n      .then((steps) => {\n        steps = steps || [];\n        setSteps(steps);\n\n        const usedUrl = parseUrlParams(steps);\n        if (!usedUrl) {\n          const defaultStep = getDefaultSelectedStep(steps);\n          if (defaultStep) {\n            setOpenStage(defaultStep.stageId);\n\n            if (defaultStep.stageId) {\n              setExpandedSteps((prev) => [...prev, defaultStep.id]);\n              updateStepConsoleOffset(\n                defaultStep.id,\n                false,\n                0 - LOG_FETCH_SIZE,\n              );\n            }\n          }\n        }\n\n        if (!run?.complete) {\n          startPollingPipeline({\n            getStateUpdateFn: getRunSteps,\n            onData: (data) => {\n              const hasNewSteps =\n                JSON.stringify(stepsRef.current) !== JSON.stringify(data);\n\n              if (userManuallySetNode) {\n                const defaultStep = getDefaultSelectedStep(steps);\n                if (defaultStep) {\n                  setOpenStage(defaultStep.stageId);\n\n                  if (defaultStep.stageId) {\n                    setExpandedSteps((prev) => [...prev, defaultStep.id]);\n                    updateStepConsoleOffset(\n                      defaultStep.id,\n                      false,\n                      0 - LOG_FETCH_SIZE,\n                    );\n                  }\n                }\n              }\n\n              if (hasNewSteps) {\n                setSteps(data);\n                stepsRef.current = data;\n              }\n            },\n            checkComplete: () => !run?.complete,\n            interval: POLL_INTERVAL,\n          });\n        }\n        return null;\n      })\n      .catch((error) => {\n        console.error(\"Error in getRunSteps:\", error);\n      });\n  }, [run?.stages]);\n\n  const handleStageSelect = useCallback(\n    (nodeId: string) => {\n      setUserManuallySetNode(true);\n\n      if (!nodeId) return;\n      if (nodeId === openStage) return; // skip if already selected\n\n      const stepsForStage = steps.filter((step) => step.stageId === nodeId);\n      const lastStep = stepsForStage[stepsForStage.length - 1];\n      const newlyExpandedSteps = lastStep ? [lastStep.id] : [];\n\n      history.replaceState({}, \"\", `?selected-node=` + nodeId);\n\n      setOpenStage(nodeId);\n      setExpandedSteps((prev) => [...prev, ...newlyExpandedSteps]);\n\n      if (lastStep) {\n        updateStepConsoleOffset(lastStep.id, false, 0 - LOG_FETCH_SIZE);\n      }\n    },\n    [openStage, steps, updateStepConsoleOffset],\n  );\n\n  const onStepToggle = (nodeId: string) => {\n    setUserManuallySetNode(true);\n    if (!expandedSteps.includes(nodeId)) {\n      setExpandedSteps((prev) => [...prev, nodeId]);\n      updateStepConsoleOffset(nodeId, false, 0 - LOG_FETCH_SIZE);\n    } else {\n      setExpandedSteps((prev) => prev.filter((id) => id !== nodeId));\n    }\n  };\n\n  const onMoreConsoleClick = (nodeId: string, startByte: number) => {\n    updateStepConsoleOffset(nodeId, true, startByte);\n  };\n\n  const getStageSteps = (stageId: string) => {\n    return steps.filter((step) => step.stageId === stageId);\n  };\n\n  const getStageStepBuffers = (stageId: string) => {\n    const buffers = new Map<string, StepLogBufferInfo>();\n    steps.forEach((step) => {\n      if (step.stageId === stageId && stepBuffers.has(step.id)) {\n        buffers.set(step.id, stepBuffers.get(step.id)!);\n      }\n    });\n    return buffers;\n  };\n\n  const getOpenStage = (): StageInfo | null => {\n    const findStage = (stages: StageInfo[]): StageInfo | null => {\n      for (const stage of stages) {\n        if (String(stage.id) === openStage) return stage;\n        if (stage.children.length > 0) {\n          const result = findStage(stage.children);\n          if (result) return result;\n        }\n      }\n      return null;\n    };\n    return openStage ? findStage(run?.stages || []) : null;\n  };\n\n  return {\n    openStage: getOpenStage(),\n    openStageSteps: getStageSteps(openStage),\n    openStageStepBuffers: getStageStepBuffers(openStage),\n    expandedSteps,\n    stages: run?.stages || [],\n    handleStageSelect,\n    onStepToggle,\n    onMoreConsoleClick,\n    loading,\n  };\n}\n\n/**\n * Starts polling a function until a complete condition is met.\n */\nconst startPollingPipeline = ({\n  getStateUpdateFn,\n  onData,\n  checkComplete,\n  interval = 1000,\n}: {\n  getStateUpdateFn: () => Promise<StepInfo[] | null>;\n  onData: (data: StepInfo[]) => void;\n  checkComplete: (data: StepInfo[]) => boolean;\n  interval?: number;\n}): (() => void) => {\n  let polling = true;\n\n  const poll = async () => {\n    while (polling) {\n      const data = (await getStateUpdateFn()) || [];\n      onData(data);\n\n      if (checkComplete(data)) {\n        polling = false;\n        break;\n      }\n\n      await new Promise((resolve) => setTimeout(resolve, interval));\n    }\n  };\n\n  setTimeout(poll, interval);\n\n  return () => {\n    polling = false;\n  };\n};\n\ninterface RunPollerProps {\n  currentRunPath: string;\n  previousRunPath?: string;\n}\n","import \"./scroll-to-top-bottom.scss\";\n\nimport { useEffect, useState } from \"react\";\n\nimport { classNames } from \"../../../common/utils/classnames.ts\";\n\nexport default function ScrollToTopBottom() {\n  const [isAtTop, setIsAtTop] = useState(true);\n  const [isAtBottom, setIsAtBottom] = useState(false);\n  const [isScrollable, setIsScrollable] = useState(false);\n\n  useEffect(() => {\n    const updateScrollState = () => {\n      const scrollTop =\n        window.pageYOffset || document.documentElement.scrollTop;\n      const windowHeight = window.innerHeight;\n      const docHeight = document.documentElement.scrollHeight;\n\n      const atTop = scrollTop <= 10;\n      const atBottom = scrollTop + windowHeight >= docHeight - 10;\n      const scrollable = docHeight > windowHeight + 10;\n\n      setIsAtTop(atTop);\n      setIsAtBottom(atBottom);\n      setIsScrollable(scrollable);\n\n      // Distance from bottom\n      const distanceFromBottom = docHeight - (scrollTop + windowHeight);\n\n      // Only trigger the offset if we're within 20px from the bottom\n      const offset = Math.max(0, Math.min(100, 100 - distanceFromBottom));\n\n      const root = document.documentElement;\n      root.style.setProperty(\"--pgv-offset-bottom\", `${offset}px`);\n    };\n\n    updateScrollState();\n\n    window.addEventListener(\"scroll\", updateScrollState);\n    window.addEventListener(\"resize\", updateScrollState);\n\n    const observer = new MutationObserver(updateScrollState);\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      characterData: true,\n    });\n\n    return () => {\n      window.removeEventListener(\"scroll\", updateScrollState);\n      window.removeEventListener(\"resize\", updateScrollState);\n      observer.disconnect();\n    };\n  }, []);\n\n  const scrollToTop = () => {\n    window.scrollTo({\n      top: 0,\n    });\n  };\n\n  const scrollToBottom = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n    });\n  };\n\n  return (\n    <div\n      className={classNames(`pgv-scroll-to-top-bottom`, {\n        \"pgv-scroll-to-top-bottom--visible\": isScrollable,\n      })}\n      aria-hidden={!isScrollable}\n    >\n      <button\n        onClick={scrollToTop}\n        className=\"jenkins-button\"\n        disabled={isAtTop}\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n          <path\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"48\"\n            d=\"M112 244l144-144 144 144M256 120v292\"\n          />\n        </svg>\n      </button>\n      <button\n        onClick={scrollToBottom}\n        className=\"jenkins-button\"\n        disabled={isAtBottom}\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n          <path\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"48\"\n            d=\"M112 268l144 144 144-144M256 392V100\"\n          />\n        </svg>\n      </button>\n    </div>\n  );\n}\n","import \"./split-view.scss\";\n\nimport {\n  Children,\n  MouseEvent as ReactMouseEvent,\n  ReactNode,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\n\nimport { classNames } from \"../../../common/utils/classnames.ts\";\nimport { useLayoutPreferences } from \"./providers/user-preference-provider.tsx\";\n\nexport default function SplitView(props: SplitViewNewProps) {\n  const {\n    setTreeViewWidth,\n    setStageViewWidth,\n    setStageViewHeight,\n    treeViewWidth,\n    stageViewWidth,\n    stageViewHeight,\n  } = useLayoutPreferences();\n\n  const { direction = \"horizontal\", storageKey } = props;\n  const [isDragging, setIsDragging] = useState(false);\n\n  const isVertical = direction === \"vertical\";\n\n  const initialSize = (() => {\n    if (storageKey === \"stages\") return treeViewWidth;\n    if (storageKey === \"graph\") {\n      return isVertical ? stageViewHeight : stageViewWidth;\n    }\n    return 300; // fallback\n  })();\n\n  useEffect(() => {\n    const newSize = (() => {\n      if (storageKey === \"stages\") return treeViewWidth;\n      if (storageKey === \"graph\") {\n        return direction === \"vertical\" ? stageViewHeight : stageViewWidth;\n      }\n      return 300;\n    })();\n\n    setPanelSize(newSize);\n  }, [direction, treeViewWidth, stageViewWidth, stageViewHeight, storageKey]);\n\n  const [panelSize, setPanelSize] = useState<number>(initialSize);\n\n  const dividerRef = useRef<HTMLDivElement>(null);\n\n  const startDragging = (e: ReactMouseEvent) => {\n    setIsDragging(true);\n    e.preventDefault();\n  };\n\n  const stopDragging = () => setIsDragging(false);\n\n  const handleDragging = (e: MouseEvent) => {\n    if (!isDragging) return;\n\n    // Dynamically follow mouse based on direction\n    const newSize =\n      direction === \"vertical\"\n        ? e.clientY - getContainerOffset()\n        : e.clientX - getContainerOffset();\n\n    const clampedSize = Math.max(\n      direction === \"vertical\" ? 100 : 200,\n      Math.min(newSize, 1500),\n    );\n    setPanelSize(clampedSize);\n\n    // Update context sizes\n    if (storageKey === \"stages\") {\n      setTreeViewWidth(clampedSize);\n    } else if (storageKey === \"graph\") {\n      if (direction === \"vertical\") {\n        setStageViewHeight(clampedSize);\n      } else {\n        setStageViewWidth(clampedSize);\n      }\n    }\n  };\n\n  const handleDoubleClick = () => {\n    const resetSize = (() => {\n      if (storageKey === \"stages\") return 300;\n      if (storageKey === \"graph\") return isVertical ? 250 : 600;\n      return 300;\n    })();\n\n    setPanelSize(resetSize);\n\n    if (storageKey === \"stages\") {\n      setTreeViewWidth(resetSize);\n    } else if (storageKey === \"graph\") {\n      if (direction === \"vertical\") {\n        setStageViewHeight(resetSize);\n      } else {\n        setStageViewWidth(resetSize);\n      }\n    }\n  };\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const getContainerOffset = () => {\n    if (containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      return direction === \"vertical\" ? rect.top : rect.left;\n    }\n    return 0;\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"mousemove\", handleDragging);\n    window.addEventListener(\"mouseup\", stopDragging);\n    return () => {\n      window.removeEventListener(\"mousemove\", handleDragging);\n      window.removeEventListener(\"mouseup\", stopDragging);\n    };\n  });\n\n  // If we only have one child, just return it\n  const childrenArray = Children.toArray(props.children).filter(Boolean);\n  if (childrenArray.length === 1) {\n    return <>{childrenArray[0]}</>;\n  }\n\n  const gridTemplate =\n    direction === \"vertical\" ? `${panelSize}px 1fr` : `${panelSize}px 1fr`;\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"pgv-split-view__container\"\n      style={{\n        display: \"grid\",\n        gridTemplateColumns:\n          direction === \"vertical\" ? undefined : gridTemplate,\n        gridTemplateRows: direction === \"vertical\" ? gridTemplate : undefined,\n      }}\n    >\n      <div\n        className={classNames(\"pgv-split-view__side-panel\", {\n          \"pgv-split-view__side-panel--vertical\": direction === \"vertical\",\n        })}\n      >\n        {childrenArray[0]}\n        <div\n          ref={dividerRef}\n          onMouseDown={startDragging}\n          onDoubleClick={handleDoubleClick}\n          className={`pgv-split-view__divider ${\n            direction === \"vertical\" ? \"pgv-split-view__divider--vertical\" : \"\"\n          }`}\n        />\n      </div>\n      <div>{childrenArray[1]}</div>\n    </div>\n  );\n}\n\ninterface SplitViewNewProps {\n  children: ReactNode[];\n  direction?: \"horizontal\" | \"vertical\";\n  storageKey: \"stages\" | \"graph\";\n}\n","export default function StageNodeLink({ agent }: StageNodeLinkProps) {\n  if (!agent) {\n    return null;\n  }\n\n  const agentName = agent === \"built-in\" ? \"Jenkins\" : agent;\n  const href = getAgentUrl(agent);\n\n  function getAgentUrl(name: string) {\n    // Wrap built-in in brackets\n    const id = name === \"built-in\" ? \"(built-in)\" : name;\n    const rootPath = document.head.dataset.rooturl;\n    return `${rootPath}/computer/${id}/`;\n  }\n\n  return (\n    <li className={\"jenkins-mobile-hide\"}>\n      <a\n        href={href}\n        className={\"jenkins-button jenkins-button--tertiary\"}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        <svg\n          width=\"512px\"\n          height=\"512px\"\n          viewBox=\"0 0 512 512\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <g\n            stroke=\"none\"\n            strokeWidth=\"1\"\n            fill=\"none\"\n            fillRule=\"evenodd\"\n            strokeLinejoin=\"round\"\n          >\n            <g\n              transform=\"translate(32.000000, 64.000000)\"\n              stroke=\"currentColor\"\n              strokeWidth=\"32\"\n            >\n              <rect x=\"0\" y=\"0\" width=\"448\" height=\"320\" rx=\"32\" />\n              <polygon\n                strokeLinecap=\"round\"\n                fillRule=\"nonzero\"\n                points=\"272 384 264 320 184 320 176 384\"\n              />\n              <line x1=\"336\" y1=\"384\" x2=\"112\" y2=\"384\" strokeLinecap=\"round\" />\n            </g>\n          </g>\n        </svg>\n        {agentName}\n      </a>\n    </li>\n  );\n}\n\ninterface StageNodeLinkProps {\n  agent?: string;\n}\n","export const DOCUMENT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n    <path\n      d=\"M416 221.25V416a48 48 0 01-48 48H144a48 48 0 01-48-48V96a48 48 0 0148-48h98.75a32 32 0 0122.62 9.37l141.26 141.26a32 32 0 019.37 22.62z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeLinejoin=\"round\"\n      strokeWidth=\"32\"\n    />\n    <path\n      d=\"M256 56v120a32 32 0 0032 32h120M176 288h160M176 368h160\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      strokeWidth=\"32\"\n    />\n  </svg>\n);\n\nexport const CONSOLE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n    <rect\n      x=\"32\"\n      y=\"48\"\n      width=\"448\"\n      height=\"416\"\n      rx=\"48\"\n      ry=\"48\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeLinejoin=\"round\"\n      strokeWidth=\"32\"\n    />\n    <path\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      strokeWidth=\"32\"\n      d=\"M96 112l80 64-80 64M192 240h64\"\n    />\n  </svg>\n);\n","import \"./stage-details.scss\";\n\nimport Dropdown from \"../../../common/components/dropdown.tsx\";\nimport StatusIcon, {\n  resultToColor,\n} from \"../../../common/components/status-icon.tsx\";\nimport Tooltip from \"../../../common/components/tooltip.tsx\";\nimport {\n  exact,\n  Paused,\n  Started,\n  Total,\n} from \"../../../common/utils/timings.tsx\";\nimport { StageInfo } from \"../../../pipeline-graph-view/pipeline-graph/main/PipelineGraphModel.tsx\";\nimport StageNodeLink from \"./StageNodeLink.tsx\";\nimport { DOCUMENT } from \"./symbols.tsx\";\n\nexport default function StageDetails({ stage }: StageDetailsProps) {\n  if (!stage) {\n    return null;\n  }\n\n  return (\n    <div\n      className={\n        \"pgv-stage-details \" + resultToColor(stage.state, stage.skeleton)\n      }\n    >\n      {stage.state === \"running\" && (\n        <div className={\"pgv-stage-details__running\"} />\n      )}\n      <div>\n        <StatusIcon\n          status={stage.state}\n          skeleton={stage.skeleton}\n          percentage={stage.completePercent}\n        />\n        <h2>{stage.name}</h2>\n      </div>\n      <ul>\n        <li>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n            <path\n              d=\"M112.91 128A191.85 191.85 0 0064 254c-1.18 106.35 85.65 193.8 192 194 106.2.2 192-85.83 192-192 0-104.54-83.55-189.61-187.5-192a4.36 4.36 0 00-4.5 4.37V152\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"32\"\n            />\n            <path\n              d=\"M233.38 278.63l-79-113a8.13 8.13 0 0111.32-11.32l113 79a32.5 32.5 0 01-37.25 53.26 33.21 33.21 0 01-8.07-7.94z\"\n              fill=\"currentColor\"\n            />\n          </svg>\n          <Total ms={stage.totalDurationMillis} />\n        </li>\n        <li>\n          <Tooltip content={exact(stage.startTimeMillis)}>\n            <span>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n                <path\n                  d=\"M256 64C150 64 64 150 64 256s86 192 192 192 192-86 192-192S362 64 256 64z\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeMiterlimit=\"10\"\n                  strokeWidth=\"32\"\n                />\n                <path\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"32\"\n                  d=\"M256 128v144h96\"\n                />\n              </svg>\n              <Started since={stage.startTimeMillis} />\n            </span>\n          </Tooltip>\n        </li>\n        {stage.pauseDurationMillis !== 0 && (\n          <li className={\"jenkins-mobile-hide\"}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n              <path\n                d=\"M145.61 464h220.78c19.8 0 35.55-16.29 33.42-35.06C386.06 308 304 310 304 256s83.11-51 95.8-172.94c2-18.78-13.61-35.06-33.41-35.06H145.61c-19.8 0-35.37 16.28-33.41 35.06C124.89 205 208 201 208 256s-82.06 52-95.8 172.94c-2.14 18.77 13.61 35.06 33.41 35.06z\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"32\"\n              />\n              <path\n                d=\"M343.3 432H169.13c-15.6 0-20-18-9.06-29.16C186.55 376 240 356.78 240 326V224c0-19.85-38-35-61.51-67.2-3.88-5.31-3.49-12.8 6.37-12.8h142.73c8.41 0 10.23 7.43 6.4 12.75C310.82 189 272 204.05 272 224v102c0 30.53 55.71 47 80.4 76.87 9.95 12.04 6.47 29.13-9.1 29.13z\"\n                fill=\"currentColor\"\n              />\n            </svg>\n            <Paused since={stage.pauseDurationMillis} />\n          </li>\n        )}\n        <StageNodeLink agent={stage.agent} />\n        <li>\n          <Dropdown\n            className={\"jenkins-button--tertiary\"}\n            disabled={stage.synthetic}\n            items={[\n              {\n                text: \"View stage as plain text\",\n                icon: DOCUMENT,\n                href: `log?nodeId=${stage.id}`,\n                target: \"_blank\",\n              },\n              {\n                text: \"Download stage logs\",\n                icon: (\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n                    <path\n                      d=\"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"32\"\n                    />\n                    <path\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"32\"\n                      d=\"M176 272l80 80 80-80M256 48v288\"\n                    />\n                  </svg>\n                ),\n                href: `log?nodeId=${stage.id}`,\n                download: `${stage.name}.txt`,\n              },\n            ]}\n          />\n        </li>\n      </ul>\n    </div>\n  );\n}\n\ninterface StageDetailsProps {\n  stage: StageInfo | null;\n}\n","import \"./console-log-card.scss\";\n\nimport {\n  lazy,\n  MouseEvent as ReactMouseEvent,\n  Suspense,\n  useEffect,\n} from \"react\";\n\nimport StatusIcon from \"../../../common/components/status-icon.tsx\";\nimport Tooltip from \"../../../common/components/tooltip.tsx\";\nimport { classNames } from \"../../../common/utils/classnames.ts\";\nimport { Total } from \"../../../common/utils/timings.tsx\";\nimport {\n  LOG_FETCH_SIZE,\n  StepInfo,\n  StepLogBufferInfo,\n} from \"./PipelineConsoleModel.tsx\";\n\nconst ConsoleLogStream = lazy(() => import(\"./ConsoleLogStream.tsx\"));\n\nexport default function ConsoleLogCard(props: ConsoleLogCardProps) {\n  useEffect(() => {\n    if (props.isExpanded) {\n      props.onMoreConsoleClick(props.step.id, props.stepBuffer.startByte);\n    }\n  }, [props.isExpanded]);\n\n  const handleToggle = (e: ReactMouseEvent<HTMLElement>) => {\n    // Only prevent left clicks\n    if (e.button !== 0 || e.metaKey || e.ctrlKey) {\n      return;\n    }\n\n    e.preventDefault();\n\n    history.replaceState({}, \"\", `?selected-node=` + props.step.id);\n\n    props.onStepToggle(props.step.id);\n  };\n\n  const showMoreLogs = () => {\n    let startByte = props.stepBuffer.startByte - LOG_FETCH_SIZE;\n    if (startByte < 0) startByte = 0;\n    props.onMoreConsoleClick(props.step.id, startByte);\n  };\n\n  const getTruncatedLogWarning = () => {\n    if (props.stepBuffer.lines && props.stepBuffer.startByte > 0) {\n      return (\n        <button\n          onClick={showMoreLogs}\n          className={\n            \"pgv-show-more-logs jenkins-button jenkins-!-warning-color\"\n          }\n        >\n          There’s more to see - {prettySizeString(props.stepBuffer.startByte)}{\" \"}\n          of logs hidden\n        </button>\n      );\n    }\n    return undefined;\n  };\n\n  const prettySizeString = (size: number) => {\n    const kib = 1024;\n    const mib = 1024 * 1024;\n    const gib = 1024 * 1024 * 1024;\n    if (size < kib) return `${size}B`;\n    if (size < mib) return `${(size / kib).toFixed(2)}KiB`;\n    if (size < gib) return `${(size / mib).toFixed(2)}MiB`;\n    return `${(size / gib).toFixed(2)}GiB`;\n  };\n\n  return (\n    <div className={\"pgv-step-detail-group\"} key={`step-card-${props.step.id}`}>\n      <div\n        className={classNames(\"pgv-step-detail-header\", \"jenkins-button\", {\n          \"jenkins-button--tertiary\": !props.isExpanded,\n        })}\n      >\n        <a\n          href={`?selected-node=` + props.step.id}\n          onClick={handleToggle}\n          key={`step-action-area-${props.step.id}`}\n        >\n          <div className=\"pgv-step-detail-header__content\">\n            <StatusIcon\n              status={props.step.state}\n              percentage={props.step.completePercent}\n            />\n\n            {props.step.title !== \"\" && <span>{props.step.title}</span>}\n\n            {props.step.name !== \"\" && <span>{props.step.name}</span>}\n\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 512 512\"\n              className={\"pgv-step-detail-header__chevron\"}\n              style={{ rotate: props.isExpanded ? \"90deg\" : \"0deg\" }}\n            >\n              <path\n                fill=\"none\"\n                stroke=\"var(--text-color-secondary)\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"48\"\n                opacity={0.75}\n                d=\"M184 112l144 144-144 144\"\n              />\n            </svg>\n          </div>\n\n          <div className=\"pgv-step-detail-header__actions\">\n            <span\n              style={{\n                color: \"var(--text-color-secondary)\",\n                fontWeight: \"normal\",\n              }}\n            >\n              <Total ms={props.step.totalDurationMillis} />\n            </span>\n          </div>\n        </a>\n\n        <Tooltip content={\"View step as plain text\"}>\n          <a\n            href={`log?nodeId=${props.step.id}`}\n            className={\"jenkins-button jenkins-button--tertiary\"}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n              <path\n                d=\"M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48M336 64h112v112M224 288L440 72\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"32\"\n              />\n            </svg>\n          </a>\n        </Tooltip>\n      </div>\n\n      {props.isExpanded && (\n        <div style={{ paddingTop: \"0.5rem\" }}>\n          {getTruncatedLogWarning()}\n          <Suspense>\n            <ConsoleLogStream\n              logBuffer={props.stepBuffer}\n              onMoreConsoleClick={props.onMoreConsoleClick}\n              step={props.step}\n              maxHeightScale={0.65}\n            />\n          </Suspense>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport type ConsoleLogCardProps = {\n  step: StepInfo;\n  stepBuffer: StepLogBufferInfo;\n  isExpanded: boolean;\n  onStepToggle: (nodeId: string) => void;\n  onMoreConsoleClick: (nodeId: string, startByte: number) => void;\n};\n"],"file":"assets/PipelineConsole-BpXuLrHw.js"}